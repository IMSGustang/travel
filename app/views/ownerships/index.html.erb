<%= content_for :head do %>
    <title>abutours.com | best travel services</title>
<% end %>

<%= content_for :abutours do %>
    <div class="_landing | c-cover-head">
      <div id="" class="carousel slide" data-ride="carousel">
        <ol class="carousel-indicators">
          <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
          <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
          <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
        </ol>
        <div class="carousel-inner">
          <div class="carousel-item active">
            <%= image_tag 'lib/slider/Artboard-7@2x-8.png', :class => 'd-block w-100', :alt => '' %>
          </div>
          <div class="carousel-item">
            <%= image_tag 'lib/cover/slideabu.png', :class => 'd-block w-100', :alt => '' %>
          </div>
          <div class="carousel-item">
            <%= image_tag 'lib/slider/Artboard-12@2x-8.png', :class => 'd-block w-100', :alt => '' %>
          </div>
        </div>
      </div>
    </div>

    <div class="_landing | w-product">
      <div class="container">
        <div class="card-header c-bg-transparant">
          <div class="d-flex justify-content-end">
            <div class="mr-auto">
              <h4 class="mb-0">
                Paket Umrah
              </h4>
            </div>

            <h5 class="mb-0">
              <a href="/paket-umrah?kota=&tahun=&bulan=">
                Lihat semua <i class="ion-ios-arrow-thin-right"></i>
              </a>
            </h5>
          </div>
        </div>

        <div class="row pl-2 pr-2 mb-3">
          <div class="card-group w-100">
            <div class="col-3 pl-0 pr-0">
              <div class="card">
                <a href="">
                  <div class="card-body-image">
                    <span class="badge badge-date badge-success">Januari 2019</span>
                    <%= image_tag 'lib/cover/abucover.png', :class => 'mx-auto d-block', :alt => '' %>
                  </div>
                  <div class="card-body">

                    <div class="name-packet name-packet-line">
                      Promo umrah plus batulicin quad
                    </div>

                    <p class="text-left mb-0">
                      <span class="price-packet">Rp 15.000.000</span>
                    </p>

                    <p class="card-text packet-city text-left m-0">
                      <small class="text-muted">Kota banjarmasin</small>
                    </p>
                  </div>
                </a>
              </div>
            </div>

            <div class="col-3 pl-0 pr-0">
              <div class="card">
                <a href="">
                  <div class="card-body-image">
                    <span class="badge badge-date badge-success">Januari 2019</span>
                    <%= image_tag 'lib/cover/abucover.png', :class => 'mx-auto d-block', :alt => '' %>
                  </div>
                  <div class="card-body">

                    <div class="name-packet name-packet-line">
                      Promo umrah plus batulicin quad
                    </div>

                    <p class="text-left mb-0">
                      <span class="price-packet">Rp 15.000.000</span>
                    </p>

                    <p class="card-text packet-city text-left m-0">
                      <small class="text-muted">Kota banjarmasin</small>
                    </p>
                  </div>
                </a>
              </div>
            </div>

            <div class="col-3 pl-0 pr-0">
              <div class="card">
                <a href="">
                  <div class="card-body-image">
                    <span class="badge badge-date badge-success">Januari 2019</span>
                    <%= image_tag 'lib/cover/abucover.png', :class => 'mx-auto d-block', :alt => '' %>
                  </div>
                  <div class="card-body">

                    <div class="name-packet name-packet-line">
                      Promo umrah plus batulicin quad
                    </div>

                    <p class="text-left mb-0">
                      <span class="price-packet">Rp 15.000.000</span>
                    </p>

                    <p class="card-text packet-city text-left m-0">
                      <small class="text-muted">Kota banjarmasin</small>
                    </p>
                  </div>
                </a>
              </div>
            </div>

            <div class="col-3 pl-0 pr-0">
              <div class="card">
                <a href="">
                  <div class="card-body-image">
                    <span class="badge badge-date badge-success">Januari 2019</span>
                    <%= image_tag 'lib/cover/abucover.png', :class => 'mx-auto d-block', :alt => '' %>
                  </div>
                  <div class="card-body">

                    <div class="name-packet name-packet-line">
                      Promo umrah plus batulicin quad
                    </div>

                    <p class="text-left mb-0">
                      <span class="price-packet">Rp 15.000.000</span>
                    </p>

                    <p class="card-text packet-city text-left m-0">
                      <small class="text-muted">Kota banjarmasin</small>
                    </p>
                  </div>
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="_landing | c-about">
      <div class="container">
        <h1 class="text-center mb-5">
          Mengapa Umrah di Abutours <strong>Lebih Nyaman & Terpercaya ?</strong>
        </h1>
        <div class="row">
          <div class="card-group">
            <div class="card | c-about__item">
              <%= image_tag 'lib/icon/travelumrahterbesar.png', :class => 'mx-auto d-block', :alt => '' %>
              <div class="card-body | c-about__item-b">
                <p class="card-text | a-text text-center mb-0">
                  <strong>TRAVEL UMRAH TERBESAR</strong>
                </p>
                <p class="card-text | a-text">
                  Online travel umrah pertama dan terbesar dengan memiliki 24
                  kantor
                  cabang yang tersebar di seluruh Indonesia berada di kota Jakarta, Makassar,
                  Palembang, Surabaya, serta kota lainnya dengan
                  bekerjasama banyak airline dalam menghadirkan harga khusus yang
                  terpercaya.
                </p>
              </div>
            </div>

            <div class="card | c-about__item">
              <%= image_tag 'lib/icon/hargaterjamin.png', :class => 'mx-auto d-block', :alt => '' %>
              <div class="card-body | c-about__item-b">
                <p class="card-text | a-text text-center mb-0">
                  <strong>HARGA TERJAMIN</strong>
                </p>
                <p class="card-text | a-text">
                  Kami menyediakan paket umrah dengan harga yang terjamin dan
                  berkualitas. Semua biaya sudah termasuk dengan airport tax,handling dan tentu saja dengan fasilitas
                  dan pelayanan terbaik.
                </p>
              </div>
            </div>

            <div class="card | c-about__item">
              <%= image_tag 'lib/icon/teknologimutakhir.png', :class => 'mx-auto d-block', :alt => '' %>
              <div class="card-body | c-about__item-b">
                <p class="card-text | a-text text-center mb-0">
                  <strong>TEKNOLOGI MUTAKHIR</strong>
                </p>
                <p class="card-text | a-text">
                  Berbeda dengan travel umroh dan biro perjalanan lainnya,
                  abutours.com dengan sistem online dan berbasis teknologi yang aman &amp; mutakhir,  sehingga
                  memudahkan
                  jama’ah dalam bertransaksi dan menghemat waktu.
                </p>
              </div>
            </div>

            <div class="card | c-about__item">
              <%= image_tag 'lib/icon/tidakrepot.png', :class => 'mx-auto d-block', :alt => '' %>
              <div class="card-body | c-about__item-b">
                <p class="card-text | a-text text-center mb-0">
                  <strong>TIDAK PERLU SUSAH</strong>
                </p>
                <p class="card-text | a-text">
                  Pengurusan barang bawaan Anda akan ditangani langsung oleh tim abutours sejak
                  keberangkatan hingga kepulangan. Jadi, Anda tidak perlu susah untuk membawanya
                  karena Anda akan mendapatkan barang bawaan Anda di dalam kamar hotel.
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
<% end %>

<%= content_for :foot do %>
    <script type="text/javascript">
        $(document).ready(function () {
            new Fingerprint2().get(function (result, components) {
                $('#afb').val(result);
                var _link1 = $("#authgplus").attr('href')
                var _link2 = $("#authfb").attr('href')
                $("#authgplus").attr('href', _link1 + '?fp=' + result);
                $("#authfb").attr('href', _link2 + '?fp=' + result);
            });
        });
    </script>
    <script type="text/javascript">
        $(document).ready(function () {
            $(".js-example-placeholder-single").select2({
                placeholder: "Pilih..."
            });
            $('#nominalsPulsa').select2({});
            $('#nominalsPaket').select2({});
            $('#nominalsToken').select2({});
            $('#voucherProvider').select2({});
            $('#nominalsGame').select2({});
        });

        $(document).ready(function () {
            // Kota keberangkatan
            $('#kota').prettyDropdown({
                afterLoad: function () {
                    console.log('abutours.com | best travel services');
                }
            });

            // Jenis paket
            $('#paket').prettyDropdown({
                afterLoad: function () {
                    console.log('abutours.com | best travel services');
                }
            });

            // Jenis paket
            $('#bulan').prettyDropdown({
                afterLoad: function () {
                    console.log('abutours.com | best travel services');
                }
            });

            // tahun paket
            $('#tahun').prettyDropdown({
                afterLoad: function () {
                    console.log('abutours.com | best travel services');
                }
            });
        });

        $(document).ready(function () {
            $('input[name=checkbox]').change(function () {
                if ($(this).prop("checked")) {
                    setTimeout(function () {
                        $('#PP').fadeIn('slow');
                        $('#PP').removeClass('d-none');
                    }, 200);
                } else {
                    setTimeout(function () {
                        $('#PP').fadeOut('slow');
                        $('#PP').addClass('d-none');
                    }, 200);
                }
            });
        });
    </script>

    <script type="text/javascript">
        // daterange numberMonth
        function setDate() {
            var d = $("#sekalijalan").datepicker('getDate');
            $("#pulangpergi").datepicker('option', 'minDate', d);
            if ($("#pulangpergi").val()=='') {
                $("#pulangpergi").datepicker('setDate', d);
            }
        }
        $(function () {
            $("#sekalijalan").datepicker({
                dateFormat: 'dd/mm/yy',
                showOtherMonths: true,
                numberOfMonths: 2,
                minDate: 'today',
                onSelect: setDate

            });

            $("#pulangpergi").datepicker({
                dateFormat: 'dd/mm/yy',
                showOtherMonths: true,
                numberOfMonths: 2,
                minDate: 'today',
                beforeShow: setDate
            });

            $("#sekalijalan").datepicker('setDate', new Date());
        });
    </script>

    <script type="text/javascript">
        $.fn.animateRotate = function(angle, duration, easing, complete) {
            var args = $.speed(duration, easing, complete);
            var step = args.step;
            return this.each(function(i, e) {
                args.complete = $.proxy(args.complete, e);
                args.step = function(now) {
                    $.style(e, 'transform', 'rotate(' + now + 'deg)');
                    if (step) return step.apply(e, arguments);
                };

                $({deg: 0}).animate({deg: angle}, args);
            });
        };

        $("#tombol").click(function (e) {
            var asal = $('#kota1').val();
            var tujuan = $('#kota2').val();
            $('#kota1').val(tujuan).trigger('change');
            $('#kota2').val(asal).trigger('change');
        });

        $('#tombol2').click(function () {
            var $departures = $('#kota1 option');
            var $arrivals = $('#kota2 option');

            /* Store the selected values */
            var departure = $('#kota1 option:checked').text();
            var arrival = $('#kota2 option:checked').text();

            /* Swap the option lists */
            $('#kota1').append($departures);
            $('#koat2').append($arrivals);

            /* Re-set the selected values */
            $('#kota1 option:contains(' + departure + ')').prop('selected', true);
            $('#kota2 option:contains(' + arrival + ')').prop('selected', true);
        });
    </script>

    <script type="text/javascript">
        var typeText = {
            adult: {
                singular: 'Dewasa', plural: 'Dewasa'
            },
            child: {
                singular: 'Anak', plural: 'Anak'
            },
            infant: {
                singular: 'Bayi', plural: 'Bayi'
            }
        }

        $(function () {
            var $popover = $('.popover-markup>.trigger').popover({
                container: "body",
                html: true,
                placement: 'top',

                content: function () {
                    return $(this).parent().find('.content').html();
                }
            });

            // open popover & inital value in form
            var passengers = [1, 0, 0];
            $('.popover-markup>.trigger').click(function (e) {
                e.stopPropagation();
                $(".popover-body input").each(function (i) {
                    $(this).val(passengers[i]);
                });
            });

            // close popover
            $(document).click(function (e) {
                if ($(e.target).is('.demise')) {
                    $('.popover-markup>.trigger').popover('hide');
                }
            });

            // store form value when popover closed
            $popover.on('hide.bs.popover', function () {
                $(".popover-body input").each(function (i, val) {
                    passengers[i] = $(this).val();

                    dewasa = $('#rAdult');
                    anak = $('#rChild');
                    bayi = $('#rInfant');

                    dewasa.val(passengers[0]);
                    anak.val(passengers[1]);
                    bayi.val(passengers[2]);

                });
            });

            // spinner(+-btn to change value) & total to parent input
            $(document).on('click', '.number-spinner a', function () {
                var btn = $(this),
                    input = btn.closest('.number-spinner').find('input'),
                    total = $('#passengers').val(),
                    oldValue = input.val().trim();
                adult = $('#adult').val();

                if (btn.attr('data-dir') == 'up') {
                    if (oldValue < input.attr('max')) {
                        oldValue++;
                        total++;
                    }
                } else {
                    if (oldValue > input.attr('min')) {
                        oldValue--;
                        total--;
                    }
                }

                $('#passengers').val(total);

                input.val(oldValue);

                passangerInfoText = [];
                $(".popover-body input").each(function (i) {
                    if (this.value > -1) {
                        passangerInfoText.push(typeText[this.id][this.value > 1 ? 'plural' : 'singular'] + ': ' + this.value);
                    }
                });
                $('#passanger-info').val(passangerInfoText.join(', '));

                // Ambil Value Dari Response
                var passanger_value = passangerInfoText.join(', ');
                var dewasa = passanger_value.substr(8,1);
                var anak = passanger_value.substr(17,1);
                var balita = passanger_value.substr(26,1);

                $('#rAdult').val(dewasa);
                $('#rChild').val(anak);
                $('#rInfant').val(balita);

            });
            $(".popover-markup>.trigger").popover('hide');
        });
    </script>

    <script type="text/javascript">
        function cekHargaPulsa(val) {
            nominal = $('#nominalsPulsa'); //pulsa
            nominal.html('');
            if (val.length > 9) {
                $.ajax({
                    url: "/pulsa/inquiry-news/" + val,
                    type: 'get',
                    success: function (data) {
                        nominal.html('');
                        if(data.status == 200){
                            $.each(data['data'], function (i, value) {
                                nominal.append("<option value='" + value.product_id + "' data-price='Rp " + numberFormat(value.price) + "' data-value='"+ value.nominal +"'>" + value.voucher + ' - ' + value.nominal + "</option>");
                            });
                            $('#priceTagPulsa').html($('#nominalsPulsa').find("option:selected").data('price'));
                        }else{
                            alert('periksa kembali nomor telepon Anda');
                        }
                    },
                    error: function (data) {
                        swal({
                            text: 'terjadi kesalahan',
                            timer: 2000,
                            type: 'warning',
                            onOpen: function () {
                                swal.showLoading()
                            }
                        });
                    }
                });
            }
        }

        $('#nominalsPulsa').on('change', function(e){
            $('#priceTagPulsa').html($(this).find("option:selected").data('price'));
        });

        function cekHargaPaket(val) {
            nominal = $('#nominalsPaket'); // paket data
            nominal.html('');
            if (val.length > 10) {
                $.ajax({
                    url: "/paket-data/inquiry-news/" + val,
                    type: 'get',
                    success: function (data) {
                        nominal.html('');
                        if(data.status == 200){
                            if(data['data'].length == 0){
                                alert('paket data tidak tersedia');
                            }else{
                                $.each(data['data'], function (i, value) {
                                    nominal.append("<option value='" + value.product_id +
                                        "' data-price='Rp " + numberFormat(value.price) +
                                        "' data-value='" + value.nominal + "'>" + value.voucher + ' - ' + value.nominal + "</option>");
                                });
                                $('#priceTagPaket').html($('#nominalsPaket').find("option:selected").data('price'));
                            }
                        }else{
                            alert('periksa kembali nomor telepon Anda');
                        }
                    },
                    error: function (data) {
                        swal({
                            text: data.responseJSON.message,
                            timer: 2000,
                            type: 'warning',
                            onOpen: function () {
                                swal.showLoading()
                            }
                        });
                    }
                });
            }
        }

        $('#nominalsPaket').on('change', function(e){
            $('#priceTagPaket').html($(this).find("option:selected").data('price'));
        });

        function cekHargaToken(val) {
            nominal = $('#nominalsToken'); // paket data
            nominal.html('');
            if (val.length > 9) {
                $.ajax({
                    url: "/token-listrik/inquiry/" + val,
                    type: 'get',
                    success: function (data) {
                        if (data.status == 200){
                            nominal.html('');
                            admin = parseInt(data.data.admin);
                            data = data.power_purchase_denom.item;
                            $.each(data, function (i, value) {
                                harga = numberFormat(parseInt(value) + admin);
                                nominal.append("<option value='" + value + "' data-price='Rp " + harga + "'data-value='" + value + "'>" + numberFormat(value) + "</option>");
                            });
                            $('#priceTagToken').html($('#nominalsToken').find("option:selected").data('price'));
                        }else{
                            alert('periksa kembali id pelanggan atau nomor meter Anda');
                        }
                    },
                    error: function (data) {
                        swal({
                            text: data.responseJSON.message,
                            timer: 2000,
                            type: 'warning',
                            onOpen: function () {
                                swal.showLoading()
                            }
                        });
                    }
                });
            }
        }

        $('#nominalsToken').on('change', function(e){
            $('#priceTagToken').html($('#nominalsToken').find("option:selected").data('price'));
        });

        //        val = $("#voucherProvider").val();
        //        nominal = $('#nominalsGame');
        //        nominal.html('');
        //        $.get("/voucher-game/inquiry-new/" + val, function (data) {
        //            if (data.status == 200){
        //                nominal.html('');
        //                $.each(data, function (i, value) {
        //                    nominal.append("<option value='" + value.product_id + "' data-price='Rp " + numberFormat(value.harga) + "'data-value='"+ value.nominal +"'>" + value.voucher + ' - ' + value.nominal + "</option>");
        //                });
        //                $('#priceTagGame').html($('#nominalsGame').find("option:selected").data('price'));
        //            }else{
        //                alert('periksa kembali voucher Anda');
        //            }
        //        });

        function cekHargaVoucher(val) {
            nominal = $('#nominalsGame');
            nominal.html('');
            $.get("/voucher-game/inquiry-new/" + val, function (data) {
                if (data.status == 200){
                    if(data['data'].length == 0) {
                        alert('voucher game tidak tersedia');
                    }else{
                        nominal.html('');
                        $.each(data['data'], function (i, value) {
                            nominal.append("<option value='" + value.product_id + "' data-price='Rp " + numberFormat(value.harga) + "'data-value='"+ value.nominal +"'>" + value.voucher + ' - ' + value.nominal + "</option>");
                        });
                        $('#priceTagGame').html($('#nominalsGame').find("option:selected").data('price'));
                    }
                }else{
                    alert('periksa kembali voucher Anda');
                }
            });
        }

        $('#nominalsGame').on('change', function(e){
            $('#priceTagGame').html($(this).find("option:selected").data('price'));
        });
    </script>


<% end %>